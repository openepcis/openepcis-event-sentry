{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://openepcis.github.io/openepcis-event-sentry/json-schema-epcis-snippets/error-declaration-0.1.0.json",
    "title": "EPCIS errorDeclaration field",
    "description": "Specifies value for the errorDeclaration field, expressed as object containing declaration time, reason, and optional corrective event references.",
    "type": "object",
    "properties": {
	"errorDeclaration": {
	    "$ref": "#/$defs/errorDeclaration"
	}
    },
    "$defs": {
	"errorDeclaration": {
	    "type": "object",
	    "properties": {
		"declarationTime": {
		    "$ref": "#/$defs/time"
		},
		"reason": {
		    "$ref": "#/$defs/reason"
		},
		"correctiveEventIDs": {
		    "type": "array",
		    "items": {
			"$ref": "#/$defs/uri"
		    }
		}
	    },
	    "required": [
		"declarationTime"
	    ]
	},
	"reason": {
	    "anyOf": [
		{
		    "$ref": "#/$defs/vocab-other-uri"
		},
		{
		    "type": "string",
		    "enum": [
			"did_not_occur",
			"incorrect_data"
		    ]
		}
	    ]
	},
	"time": {
	    "type": "string",
	    "format": "date-time"
	},
	"uri": {
	    "type": "string",
	    "format": "uri"
	},
	"vocab-other-uri": {
	    "type": "string",
	    "format": "uri",
	    "pattern": "^(?!(urn:epcglobal:cbv|https?:\\/\\/ref\\.gs1\\.org/cbv\\/))"
	}
    }
}
